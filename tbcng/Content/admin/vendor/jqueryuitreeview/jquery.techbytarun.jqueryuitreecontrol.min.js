/*! jqueryuitreecontrol 2016-06-26 */
!function(a){$treedatatype={Json:1,Xml:2},$treedataformat={Linear:1,Hierarchy:2};var b={containerid:null,url:null,async:!1,dataset:null,datatype:$treedatatype.Json,dataformat:$treedataformat.Hierarchy,class_node_collapse:"ui-icon-folder-collapsed",class_node_expand:"ui-icon-folder-open",class_node_item:"ui-icon-document",collapse_tree:!1,class_node_highlight:"ui-state-highlight",class_node_add:"ui-icon-plusthick",class_node_remove:"ui-icon-minusthick",show_button_check:!1,show_button_add:!1,show_button_remove:!1,node_remove_message:"Are you sure you want to remove this node?",onstart:function(){},onend:function(){},onprocessingstart:function(){},onprocessingcomplete:function(){},onprocessingerror:function(a,b,c){},onbeforedataconversion:function(){},onafterdataconversion:function(){},onrenderstart:function(){},onrendercomplete:function(){},onbeforenodeinsert:function(a){},onafternodeinsert:function(a){},onselectednode:function(a,b,c){},onbeforeaddnode:function(a,b,c){},onafteraddnode:function(a,b,c){},onbeforeremovenode:function(a,b,c){},onafterremovenode:function(a,b,c){},onaddnode:function(a,b,c){},onremovenode:function(a,b,c){},onnodecheckselected:function(a,b,c){}},c=b;a.fn.btechcotree=function(d){function e(){c.onstart(),c.onprocessingstart(),f(),c.onprocessingcomplete(),c.onrenderstart(),m(),c.onrendercomplete(),c.onend()}function f(){if(null!=c.url&&c.url.length>0){var b="";switch(c.datatype){case 1:b="json";break;case 2:b="xml"}a.ajax({type:"GET",async:c.async,url:c.url,dataType:b,success:function(a){c.dataset=a},error:function(a,b,d){c.onprocessingerror(a,b,d)}})}switch(c.onbeforedataconversion(),c.datatype){case 1:switch(c.dataformat){case 1:i(c.dataset.root);break;case 2:u=c.dataset.root}break;case 2:switch(c.dataformat){case 1:j(c.dataset);break;case 2:k(c.dataset)}}c.onafterdataconversion()}function g(a){var b;b={id:a.id,name:a.name,parentId:a.parentId,href:a.href,target:a.target,tooltip:a.tooltip,buttoncheck:a.buttoncheck,buttonadd:a.buttonadd,buttonremove:a.buttonremove,isdisabled:a.isdisabled,ischecked:a.ischecked,classnodeicon:a.classnodeicon,childnodes:[]};for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c]);return b}function h(b){var c,d=0;return null!=a(b).parent().attr("id")?d=a(b).parent().attr("id"):null!=a(b).attr("parentId")&&(d=a(b).attr("parentId")),c={id:a(b).attr("id"),name:a(b).attr("name"),parentId:d,href:a(b).attr("href"),target:a(b).attr("target"),tooltip:a(b).attr("tooltip"),buttoncheck:null!=a(b).attr("buttoncheck")&&a(b).attr("buttoncheck"),buttonadd:null!=a(b).attr("buttonadd")&&a(b).attr("buttonadd"),buttonremove:null!=a(b).attr("buttonremove")&&a(b).attr("buttonremove"),isdisabled:null!=a(b).attr("isdisabled")&&a(b).attr("isdisabled"),ischecked:null!=a(b).attr("ischecked")&&a(b).attr("ischecked"),classnodeicon:a(b).attr("classnodeicon"),childnodes:[]},a(b.attributes).each(function(){c.hasOwnProperty(this.name)||(c[this.name]=this.value)}),c}function i(b){a(b).each(function(a,b){var c=g(this);0==u.length||0==c.parentId?u.push(c):l(u,c)})}function j(b){a(b).find("node").each(function(a,b){var c=h(this);0==u.length||0==c.parentId?u.push(c):l(u,c)})}function k(b){a(b).find("node").each(function(a,b){var c=h(this);0==u.length||0==c.parentId?u.push(c):l(u,c)})}function l(a,b){for(var c=0;c<a.length;c++){if(a[c].id==b.parentId){0==a[c].childnodes.length&&(a[c].childnodes=[]),a[c].childnodes.push(b);break}a[c].childnodes instanceof Object&&l(a[c].childnodes,b)}}function m(){o(u),a("#"+c.containerid).append(v),n(),t()}function n(){var b=a.fn.btechcotree.GetRootNodes();a.fn.btechcotree.ToggleCaratIcon(b),a.fn.btechcotree.ToggleTree(b),c.collapse_tree&&(a.fn.btechcotree.ToggleCaratIcon(b),a.fn.btechcotree.ToggleTree(b))}function o(b){v+=0==v.length?"<ul style='list-style-type:none;'>":"<ul style='list-style-type:none; display:none;'>",a(b).each(function(a,b){c.class_node_collapse;c.onbeforenodeinsert(b),v+=p(this),c.onafternodeinsert(b),null!=this.childnodes&&this.childnodes.length>0&&o(this.childnodes)}),v+="</ul>"}function p(a){var b="",d=20,e=["id","name","parentId","href","target","tooltip","buttoncheck","buttonadd","buttonremove","isdisabled","ischecked","classnodeicon","childnodes"];b+="<li nodeid='"+a.id+"'";for(var f in a)e.indexOf(f)<0&&(b+=" "+f+"='"+a[f]+"'");return b+=">",b+="<div>",b+="<span class='ui-icon ",b+=null!=a.classnodeicon&&a.classnodeicon.length>0?a.classnodeicon:null!=a.childnodes&&a.childnodes.length>0?c.collapse_tree?c.class_node_expand:c.class_node_collapse:c.class_node_item,b+="' data-action='nav_items' style='position:absolute; margin-top:1px;'></span>",(a.buttoncheck||null==a.buttoncheck&&c.show_button_check)&&(b+="<input type='checkbox' style='position:absolute; margin-top:1px;margin-left:"+d+"px;'",a.isdisabled&&(b+=" disabled='true'"),b+="true"==a.ischecked?" checked='true' data-ischecked="+a.ischecked:" data-ischecked='false'",b+="></input>",d+=20),(a.buttonadd||null==a.buttonadd&&c.show_button_add)&&(b+="<span class='ui-icon "+c.class_node_add+"' data-action='add' style='position:absolute; margin-top:1px;margin-left:"+d+"px;'></span>",d+=20),(a.buttonremove||null==a.buttonremove&&c.show_button_remove)&&(b+="<span class='ui-icon "+c.class_node_remove+"' data-action='remove' style='position:absolute; margin-top:1px;margin-left:"+d+"px;'></span>",d+=20),a.href&&(b+="<a href='"+a.href+"' target='"+a.target+"'>"),b+="<span style='margin-left:"+d+"px;' data-action='text'",null!=a.tooltip&&(b+=" title='"+a.tooltip+"'"),b+=">"+a.name+"</span>",a.href&&(b+="</a>"),b+="</div>",b+="</li>"}function q(b,d){a("#"+c.containerid+" ul li div span[data-action='text']").removeClass(c.class_node_highlight),d&&a(b).parent("div").parent("li").find("span[data-action='text']:first").addClass(c.class_node_highlight)}function r(b,c){s(b,c),a(b).parent("div").parent("li").next("ul").find("input[type='checkbox']").each(function(){s(this,c)}),a(b).parents("ul").prev("li").find("div input[type='checkbox']").each(function(){s(this,c)})}function s(b,c){c?(a(b).prop("checked","true"),a(b).attr("data-ischecked","true")):(a(b).removeAttr("checked"),a(b).attr("data-ischecked","false"))}function t(){a("#"+c.containerid+" ul li div").find("input[type='checkbox']").each(function(){if(a(this).is(":checked")&&a(this).attr("data-ischecked")&&a(this).parent("div").parent("li").next("ul").children().find("input[type='checkbox']").length>0){var b=!1;a(this).parent("div").parent("li").next("ul").children().each(function(){a(this).find("input[type='checkbox']").is(":checked")&&a(this).find("input[type='checkbox']").attr("data-ischecked")&&(b=!0)}),b||(a(this).removeAttr("checked"),a(this).attr("data-ischecked","false"))}}),a("#"+c.containerid+" ul li div").find("input[type='checkbox'][checked='true']").each(function(){a(this).parents("ul").prev("li").each(function(){a(this).find("input[type='checkbox']").attr("checked","true"),a(this).find("input[type='checkbox']").attr("data-ischecked","true")})})}c=a.extend({},b,d);var u=[],v="";e(),a("li div span[data-action='nav_items']").bind("click",function(){a.fn.btechcotree.ToggleCaratIcon(this),a.fn.btechcotree.ToggleTree(this)}),a("li div span[data-action='text']").bind("click",function(b){c.onselectednode(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b),q(this,!0)}),a("li div input[type='checkbox']").bind("click",function(b){c.onnodecheckselected(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b),r(this,a(this).is(":checked"))}),a("li div span[data-action='add']").bind("click",function(b){c.onbeforeaddnode(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b),q(this,!0),c.onaddnode(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b),c.onafteraddnode(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b)}),a("li div span[data-action='remove']").bind("click",function(b){c.onbeforeremovenode(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b),q(this,!0);var d=confirm(c.node_remove_message);d?c.onremovenode(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b):q(this,!1),c.onafterremovenode(a(this).parent("div").parent("li").attr("nodeid"),a(this).parent("div").parent("li"),b)})},a.fn.btechcotree.GetRootNodes=function(){return a("#"+c.containerid+"> ul > li > div > span:nth-child(1)")},a.fn.btechcotree.ToggleTree=function(b){a(b).parent("div").parent("li").next("ul").toggle()},a.fn.btechcotree.ToggleCaratIcon=function(b){a(b).each(function(){a(this).hasClass(c.class_node_item)||(a(this).hasClass(c.class_node_expand)?(a(this).removeClass(c.class_node_expand),a(this).addClass(c.class_node_collapse)):a(this).hasClass(c.class_node_collapse)?(a(this).removeClass(c.class_node_collapse),a(this).addClass(c.class_node_expand)):a(this).addClass(c.class_node_expand))})},a.fn.btechcotree.ExpandCollapseTree=function(b,c){c?a(b).parent("div").parent("li").next("ul").is(":visible")||(a(b).parent("div").parent("li").next("ul").show(),a.fn.btechcotree.ToggleCaratIcon(b)):a(b).parent("div").parent("li").next("ul").is(":visible")&&(a(b).parent("div").parent("li").next("ul").hide(),a.fn.btechcotree.ToggleCaratIcon(b))},a.fn.btechcotree.Expand=function(){var b=a.fn.btechcotree.GetRootNodes();a.fn.btechcotree.ExpandCollapseTree(b,!0)},a.fn.btechcotree.Collapse=function(){var b=a.fn.btechcotree.GetRootNodes();a.fn.btechcotree.ExpandCollapseTree(b,!1)},a.fn.btechcotree.Toggle=function(){var b=a.fn.btechcotree.GetRootNodes();a.fn.btechcotree.ToggleCaratIcon(b),a.fn.btechcotree.ToggleTree(b)}}(jQuery);